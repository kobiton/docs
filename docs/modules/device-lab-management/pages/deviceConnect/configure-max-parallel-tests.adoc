= Control the capacity limit of a host machine
:navtitle: Control host machine capacity limit

In this section, you will learn about:

* What the maximum capacity of a host machine is and when to set the limit.

* How to set the capacity limit.

* What the behaviour is after the limit is set.

* Recommendations when the limit is reached.

== What is a host machine's capacity and when to set the limit

A host machine has its own maximum capacity regarding how many parallel tests (the number of devices in sessions) can be run at once. This maximum capacity might be lower than the total of connected devices on the host.

If the host machine satisfies all hardware requirements from Kobiton, then the maximum capacity usually is 26 parallel tests at once. Therefore, only host machines with more than 26 connected devices need to have the limit set.

== Set the capacity limit

. Open the Kobiton web portal and log in using an account with *ADMIN* role.

. Select the profile picture and choose **Settings**, then choose **Device Management**.

. Choose *Settings* under a host machine.

+

image:host-machine-capacity-settings.png[width=1000,alt="The Settings option of a host machine in Device Management"]

. In the pop-up, choose either of the below options:

* *Unlimited* (default): no limit for the host machine.

* *Set custom limit*: set a custom limit from 1 to 999. The recommended limit is *26*.

+

image:host-machine-set-capacity.png[width=500,alt="The available options for setting capacity limit of a host machine"]

. Select *Save*.

== Observe the capacity limit in action

Once the limit has been set for a Mac mini host machine, the total number of parallel tests will be limited to the number set in the settings.

The following session types count towards the total number:

* Scriptless (Revisit)

* Manual

* Appium Automation

* Native Espresso/UiAutomator Automation

* Native XCUITest Automation

* Gaming (Turbo Test GameDriver)

* Turbo Test Appium

* Mixed

* CLI

* API

* Clean-up

* Retained

When the maximum has been reached, no additional session of the above types can be initiated on this host even though there are still available devices. Specifically:

* All devices that are available on the host machine will be hidden in the Devices list. To show these devices, de-select the *Hide unavailable devices* checkbox in the filter.

+

image:device-filter-hide-unavailable-devices.png[width=300,alt="The Hide unavailable devices option in the Devices list filter"]

** If available devices are not hidden in the Device list, the *Launch* button is disabled.

image:available-device-launch-disabled.png[width=900,alt="An available device with the Launch button disabled"]

* In the Device Details, both the *Launch* and *Retain* buttons are disabled.

image:device-details-disabled-lauch-retain.png[width=600,alt="The disabled Launch and Retain button in Device Details"]

* If an available device is launched via the URL, the Native Framework API or an automation script, this error is returned: _Host has reached its configured capacity. Please try again later._

NOTE: The limit only applies for new sessions initiated. Existing sessions are not terminated if a limit that is lower than the current number of existing sessions are set.

== Recommended actions when the limit has been reached

* Wait for existing sessions to be finished on the host before launching a new one.

* Use similar devices on other host machines that is not at capacity if available.

* If possible, release devices from being retained to allow for more sessions.