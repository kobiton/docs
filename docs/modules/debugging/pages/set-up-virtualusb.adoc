= Set up virtualUSB
:navtitle: Set up virtualUSB
:tabs-sync-option:

Learn how to set up virtualUSB on your personal computer so you can debug *local* and *private* devices.

[NOTE]
You'll need to xref:debugging:local-devices/configure-your-personal-computer.adoc[configure your personal computer] after you complete these steps.

== Before you start

You'll need a personal computer with the following system specifications:


[tabs]
======
macOS::
+

* MacOS Monterey 12 or later.

* Xcode 13 or higher (be sure to select a version that works with the iOS versions to be tested)

Windows::

* Windows 10 or later.

======

[IMPORTANT]
For both MacOS and Windows, administrative privilege is required to set up and use virtualUSB.

== Android requirements

To connect to Android devices via virtualUSB, you must install Android Debug Bridge (`adb`) from the https://developer.android.com/tools/releases/platform-tools#downloads[Android SDK Platform-Tools,window=read-later] package. If you don't already have `adb` on your workstation, download it from Android or install an IDE like Android Studio.

Follow the https://developer.android.com/studio/command-line/variables[official Android developer guide] to set up the required environment variables for adb. You can also run the below example commands to set the environment variables.

[tabs]
======
macOS with Zsh shell::
+
--
[source,shell]
----
export ANDROID_HOME=path/to/Android/sdk
export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/tools/bin:$ANDROID_HOME/platform-tools
----
[NOTE]
Replace `path/to/Android/sdk` with the actual location of SDK installation directory (the folder containing `platform-tools`).
--

Windows::
+
--
[source,shell]
----
set ANDROID_HOME=C:\path\to\Android\Sdk
set PATH=%PATH%;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools
----
[NOTE]
Replace `C:\path\to\Android\Sdk` with the actual location of SDK installation directory (the folder containing `platform-tools`).
--
======

== For MacOS only: Prepare debug symbols for iOS devices

If your network has a low bandwidth, fetching debug symbol files for Xcode via virtualUSB can be slow and unreliable. In such cases, you'll need to manually prepare the debug symbols, which are specific to the device’s iOS version. If needed, contact our Support team and request the debug symbols for your devices. Then, copy the debug symbols to your local Mac folder:
[source]
/Users/<your username>/Library/Developer/Xcode/iOS DeviceSupport/

== Clean up previous virtualUSB version before installing new version

If you have installed virtualUSB previously, we recommend uninstalling the old version before installing a new one. See xref:uninstall-virtualusb.adoc[Uninstall virtualUSB,window=read-later] for guidance.

== Download virtualUSB

Download the appropriate virtualUSB for the current OS:

* MacOS: https://kobiton-us-east.s3.amazonaws.com/downloads/virtualUSB/virtualUSB.pkg[virtualUSB.pkg]
* Windows: https://kobiton-us-east.s3.amazonaws.com/downloads/virtualUSB/virtualUSB.msi[virtualUSB.msi]

Alternatively, click the Download button on the navigation bar of the Kobiton Portal, then download the appropriate virtualUSB package (for Cloud and Hybrid customers only).

image:debugging:download-virtualusb-closeup.png[width=500,alt="Download virtual USB from Kobiton portal"]

== Install virtualUSB

[tabs]
======
macOS::
+
--
[WARNING]
Do not install virtualUSB on a Mac that has an existing deviceConnect installation.

Open the downloaded *virtualUSB.pkg* file to begin the installation. Select *Continue* and follow the on-screen guide to install.

image:

After the installation completes, go to the *Applications* folder in Finder, and open *virtualUSB*:

image:

If this is the first time launching the app, provide the administrator password to install the required daemon:

image:

Agree to the License terms and select Continue:

image:

--

Windows::
+
--
Open the downloaded virtualUSB.msi file. When the virtualUSB Setup Wizard starts, select Next, then follow the on-screen guide to install.

image:

During installation, select *Yes* in the *User Account Control* pop-up to give the installer administrative permission:

image:

When your installation is complete, launch *virtualUSB* from the Windows Start menu:

image:

Upon the first time launching the app, you must agree to the License terms and select *Continue*:
--
======

[#_launch_vusb_and_log_in]
== Launch virtualUSB and log in

[tabs]
====

Cloud/Hybrid::
+
--

Launch virtualUSB and sign in using your email address and password or xref:profile:manage-your-api-credentials.adoc[Kobiton API key].

image:debugging:sign-in-virtualusb-context.png[width=1000,alt="Sign in Virtual USB using email or API Key"]

--

Cloud/Hybrid with custom domain::
+
--

Select the **Login to your custom domain portal** checkbox in the login screen.

Input the values for the two additional fields as below, replacing `<custom-domain>` with the customer's domain name:

API Base Url: _https://api.<custom-domain>.com_

API GRPC Base Url: _https://proxy-api-public-grpc-server.<custom-domain>.com_

Input the *Username/Email* and *Password/API Key* to log in.

The values for API Base Url and API GRPC Base Url are remembered and prefilled the next time you open the app.

--

Standalone/On-Prem::
+
--

Select the *Login to your custom domain portal* checkbox on the login screen, then input the values for two the additional fields as `<http/https>://<Portal private domain or IP>:<REST API port>`, where:

* `<http/https>`: if the OP server uses HTTPS, then use https. Otherwise, use http.

* `<Portal private domain or IP>`: if the OP server has a private domain, use its private domain. Otherwise, use the OP server’s IP address.

* `<REST API port>`:

** For *API Base Url*, use `3000`.

** For *API GRPC Base Url*, use `3001`.

*Example:*

* API Base Url: `http://129.168.36.24:3000` or `https://www.acme.local:3000`

* API GRPC Base Url: `http://129.168.36.24:3001` or `https://www.acme.local:3001`

Then input the *Username/Email* and *Password/API Key* to log in.

--


====
